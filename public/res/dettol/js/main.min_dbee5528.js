var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,o){return new(i||(i=Promise))(function(a,n){function r(t){try{h(o.next(t))}catch(e){n(e)}}function s(t){try{h(o["throw"](t))}catch(e){n(e)}}function h(t){t.done?a(t.value):new i(function(e){e(t.value)}).then(r,s)}h((o=o.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return o([t,e])}}function o(i){if(a)throw new TypeError("Generator is already executing.");for(;h;)try{if(a=1,n&&(r=n[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,n=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(r=h.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){h.label=i[1];break}if(6===i[0]&&h.label<r[1]){h.label=r[1],r=i;break}if(r&&h.label<r[2]){h.label=r[2],h.ops.push(i);break}r[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(o){i=[6,o],n=0}finally{a=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var a,n,r,s,h={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},TiaoBanComponent=function(t){function e(){var e=t.call(this)||this;return e.tiaobanCenterArr=[],e.xijuMinPosX=79,e.xijuMaxPOsX=173,e.xijuArr=["细菌_png","细菌1_png","细菌2_png","细菌3_png"],e.daojuArr=["抑菌洗手液_png","消毒液_png","泡沫洗手液_png"],e.tiaoBanMin=4,e.tiaoBanMax=10,e.humanX=275,e.xijuCreateNum=0,e.TiaoBanArr=[["森林台阶1-02_01_png","森林台阶1-02_02_png","森林台阶1-02_03_png"],["海洋台阶1-02_01_png","海洋台阶1-02_02_png","海洋台阶1-02_03_png"],["太空台阶1-04_01_png","太空台阶1-04_02_png","太空台阶1-04_03_png"]],e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.initTiaoBan()},e.prototype.init=function(){this.zidan.visible=!1;var t=Math.random();if(t>.7)if(ModelData.xijuCreateNum<ModelData.hardSpace)this.tiaobanType=TiaoBanType.xiju,++ModelData.xijuCreateNum;else switch(ModelData.xijuCreateNum=0,Math.floor(100*t)%3){case 0:this.tiaobanType=TiaoBanType.daoju1;break;case 1:this.tiaobanType=TiaoBanType.daoju2;break;case 2:this.tiaobanType=TiaoBanType.daoju3;break;default:this.tiaobanType=TiaoBanType.daoju3}else this.tiaobanType=TiaoBanType.normal;this.showTypeBan()},e.prototype.initStart=function(){this.tiaobanType=TiaoBanType.normal,this.showTypeBan()},e.prototype.showTypeBan=function(){switch(this.tiaobanType){case TiaoBanType.xiju:switch(this.daoju.$setVisible(!1),this.xiju.$setVisible(!0),Math.floor(100*Math.random())%4){case 0:this.xiju.texture=RES.getRes(this.xijuArr[0]);break;case 1:this.xiju.texture=RES.getRes(this.xijuArr[1]);break;case 2:this.xiju.texture=RES.getRes(this.xijuArr[2]);break;case 3:this.xiju.texture=RES.getRes(this.xijuArr[3])}this.xiju.anchorOffsetX=this.xiju.width/2,this.xiju.x=this.width/3+this.width/3*Math.random(),console.log("木板的宽度"+this.width+"细菌的位置"+this.xiju.x);break;case TiaoBanType.daoju1:this.daoju.$setVisible(!0),this.xiju.$setVisible(!1),this.daoju.texture=RES.getRes(this.daojuArr[0]),this.daoju.x=Math.random()*(this.width-200)+100,this.daoju.anchorOffsetX=this.daoju.width/2;break;case TiaoBanType.daoju2:this.daoju.$setVisible(!0),this.xiju.$setVisible(!1),this.daoju.texture=RES.getRes(this.daojuArr[1]),this.daoju.x=Math.random()*(this.width-200)+100,this.daoju.anchorOffsetX=this.daoju.width/2;break;case TiaoBanType.daoju3:this.daoju.$setVisible(!0),this.xiju.$setVisible(!1),this.daoju.texture=RES.getRes(this.daojuArr[2]),this.daoju.x=Math.random()*(this.width-200)+100,this.daoju.anchorOffsetX=this.daoju.width/2;break;case TiaoBanType.normal:this.daoju.$setVisible(!1),this.xiju.$setVisible(!1)}},e.prototype.changeTexture=function(t){switch(t){case 0:this.tiaobanLeft.texture=RES.getRes(this.TiaoBanArr[0][0]),this.tiaobanRight.texture=RES.getRes(this.TiaoBanArr[0][2]);for(var e=0;e<this.tiaobanCenterArr.length;e++)this.tiaobanCenterArr[e].texture=RES.getRes(this.TiaoBanArr[0][1]);break;case 1:this.tiaobanLeft.texture=RES.getRes(this.TiaoBanArr[1][0]),this.tiaobanRight.texture=RES.getRes(this.TiaoBanArr[1][2]);for(var e=0;e<this.tiaobanCenterArr.length;e++)this.tiaobanCenterArr[e].texture=RES.getRes(this.TiaoBanArr[1][1]);break;case 2:this.tiaobanLeft.texture=RES.getRes(this.TiaoBanArr[2][0]),this.tiaobanRight.texture=RES.getRes(this.TiaoBanArr[2][2]);for(var e=0;e<this.tiaobanCenterArr.length;e++)this.tiaobanCenterArr[e].texture=RES.getRes(this.TiaoBanArr[2][1])}},e.prototype.HIdeAndSHow=function(){},e.prototype.initTiaoBan=function(){for(var t=Math.floor(Math.random()*(this.tiaoBanMax-this.tiaoBanMin))+this.tiaoBanMin,e=0;t>e;e++){var i=new eui.Image;i.texture=RES.getRes("森林台阶1-02_02_png"),this.addChild(i),i.x=50+50*this.tiaobanCenterArr.length,i.bottom=0,this.tiaobanCenterArr.push(i)}this.tiaobanRight.x=50+50*this.tiaobanCenterArr.length,this.init()},e.prototype.returnIsPengZhuang=function(){return this.x<-(this.xiju.x-200-10)&&this.x>-(this.xiju.x-200+10)&&this.xiju.$visible&&this.tiaobanType==TiaoBanType.xiju?!0:!1},e.prototype.xiaomieXiJun=function(){var t=this;ModelDate.xijuNum+=1,this.tiaobanType=TiaoBanType.normal,egret.Tween.get(this.xiju).to({alpha:.4},300).to({alpha:0},300).call(function(){t.xiju.visible=!1,t.xiju.alpha=1})},e.prototype.returnIsPengZhuangDaoju=function(){if(this.x<-(this.daoju.x-200-20)&&this.x>-(this.daoju.x-200+20)&&this.daoju.$visible)switch(this.daoju.$setVisible(!1),this.tiaobanType){case TiaoBanType.daoju1:return ModelDate.daojuNum+=1,1;case TiaoBanType.daoju2:return ModelDate.daojuNum+=1,2;case TiaoBanType.daoju3:return ModelDate.daojuNum+=1,3}return 0},e.prototype.shengChengZiDanXiaomieXijun=function(){var t=this;this.tiaobanType=TiaoBanType.normal,this.zidan.visible=!0;var e=200-this.x;this.zidan.x=e,this.xiaomieXiJun(),egret.Tween.get(this.zidan).to({x:this.xiju.x+10},50).call(function(){t.zidan.visible=!1})},e}(eui.Component);__reflect(TiaoBanComponent.prototype,"TiaoBanComponent",["eui.UIComponent","egret.DisplayObject"]);var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function o(o){e.call(i,o,t)}if(RES.hasRes(t)){var a=RES.getRes(t);a?o(a):RES.getResAsync(t,o,this)}else RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return ModelData.stageWidth=this.stage.stageWidth,ModelData.stageHeight=this.stage.stageHeight,playSound(),console.log(ModelDate.chaoyuerenshu),[4,this.loadResource()];case 1:return t.sent(),this.createGameScene(),[2]}})})},e.prototype.setNum=function(t){ModelDate.chaoyuerenshu=t},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,this.loadTheme()];case 2:return i.sent(),[4,RES.loadGroup("loading",0)];case 3:return i.sent(),t=new LoadingUI,this.stage.addChild(t),[4,RES.loadGroup("preload",1,t)];case 4:return i.sent(),this.stage.removeChild(t),[3,6];case 5:return e=i.sent(),console.error(e),[3,6];case 6:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,i){var o=new eui.Theme("resource/default.thm.json",t.stage);o.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.createGameScene=function(){var t=new HomeView;this.stage.addChild(t)},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e.prototype.startAnimation=function(t){var e=this,i=new egret.HtmlTextParser,o=t.map(function(t){return i.parse(t)}),a=this.textfield,n=-1,r=function(){n++,n>=o.length&&(n=0);var t=o[n];a.textFlow=t;var i=egret.Tween.get(a);i.to({alpha:1},200),i.wait(2e3),i.to({alpha:0},200),i.call(r,e)};r()},e.prototype.onButtonClick=function(t){var e=new eui.Panel;e.title="Title",e.horizontalCenter=0,e.verticalCenter=0,this.addChild(e)},e}(eui.UILayer);__reflect(Main.prototype,"Main");var ModelData=function(){function t(){}return t.stageWidth=750,t.stageHeight=1334,t.hardSpace=3,t.xijuCreateNum=0,t}();__reflect(ModelData.prototype,"ModelData");var ModelDate=function(){function t(){}return t.scenceType=0,t.daojuNum=0,t.xijuNum=0,t.musicIsOn=!0,t.chaoyuerenshu=10,t}();__reflect(ModelDate.prototype,"ModelDate");var TiaoBanType;!function(t){t[t.xiju=0]="xiju",t[t.daoju1=1]="daoju1",t[t.daoju2=2]="daoju2",t[t.daoju3=3]="daoju3",t[t.normal=4]="normal"}(TiaoBanType||(TiaoBanType={}));var PlayerAni;!function(t){t[t.IDLE=1]="IDLE",t[t.RUN=2]="RUN",t[t.JUMP=3]="JUMP",t[t.RUSH=4]="RUSH",t[t.DEFEND=5]="DEFEND",t[t.LOSEDFD=6]="LOSEDFD",t[t.SHOOT=7]="SHOOT",t[t.DEAD=8]="DEAD"}(PlayerAni||(PlayerAni={}));var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,o){function a(t){e.call(o,t)}function n(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,n,null),i.call(o))}var r=this;"undefined"!=typeof generateEUI?egret.callLater(function(){e.call(o,generateEUI)},this):"undefined"!=typeof generateEUI2?RES.getResByUrl("resource/gameEui.json",function(t,i){window.JSONParseClass.setData(t),a(t),egret.callLater(function(){e.call(o,generateEUI2)},r)},this,RES.ResourceItem.TYPE_JSON):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,n,null),RES.getResByUrl(t,a,this,RES.ResourceItem.TYPE_TEXT))},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var ImTS=function(){function t(){}return t.prototype.tsFun=function(t){ModelDate.chaoyuerenshu=t},t}();__reflect(ImTS.prototype,"ImTS");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){var t=new egret.Shape;t.graphics.beginFill(16777215,1),t.graphics.drawRect(0,0,ModelData.stageWidth,ModelData.stageHeight),console.log(ModelData.stageWidth),console.log(ModelData.stageHeight),t.graphics.endFill(),this.addChild(t),t.touchEnabled=!0,this.textField=new egret.TextField,this.textField.textColor=5873220,this.textField.anchorOffsetX=this.textField.width/2,this.textField.anchorOffsetY=this.textField.height/2,this.textField.rotation=-90,this.addChild(this.textField),this.textField.x=ModelData.stageWidth/2,this.textField.y=ModelData.stageHeight/2+40,this.textField.width=100,this.textField.height=100,this.textField.textAlign="center";var e=this.getBG("logo_png");e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e.x=ModelData.stageWidth/2-200,e.y=ModelData.stageHeight/2,this.addChild(e)},e.prototype.onProgress=function(t,e){this.textField.text=(t/e*100).toFixed(0)+"%"},e.prototype.getBG=function(t){var e=new egret.Bitmap;return e.texture=RES.getRes(t),e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Baby=function(t){function e(){var e=t.call(this)||this;return e.babyList=new Array,e.babyIndex=0,e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);for(var e=0;15>e;e++){var i;10>e?(i="婴儿爬 2_0000"+e+"_png",this.babyList.push(RES.getRes(i))):(i="婴儿爬 2_000"+e+"_png",this.babyList.push(RES.getRes(i)))}this.addEventListener(egret.Event.ENTER_FRAME,this.DoAni,this)},e.prototype.DoAni=function(){this.ImgBaby.source=this.babyList[this.babyIndex],this.babyIndex++,this.babyIndex>14&&(this.babyIndex=0)},e}(eui.Component);__reflect(Baby.prototype,"Baby",["eui.UIComponent","egret.DisplayObject"]);var GameOverView=function(t){function e(e,i,o,a,n,r){var s=t.call(this)||this;return s.score=i,s.showType=e,s.dilu=o,s.xijun=a,s.distance=n,s.beatCount=r,s}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.skin.width=this.stage.stageWidth,this.Init()},e.prototype.Init=function(){this.ImgType.source=RES.getRes("字幕"+this.showType+"_png"),this.TxtScore.text=this.score.toString(),this.TxtDilu.text=this.dilu.toString(),this.TxtXijun.text=this.xijun.toString(),this.TxtJuli.text=this.distance.toString(),this.TxtBeat.text=this.beatCount.toString(),this.BtnDetail.addEventListener(egret.TouchEvent.TOUCH_TAP,this.BtnDetailClick,this),this.BtnShoot.addEventListener(egret.TouchEvent.TOUCH_TAP,this.BtnShootClick,this),this.BtnAgain.addEventListener(egret.TouchEvent.TOUCH_TAP,this.BtnAgainClick,this)},e.prototype.BtnDetailClick=function(){detailClick(this.score,this.dilu,this.xijun,this.distance,this.beatCount)},e.prototype.BtnShootClick=function(){shootClick(this.score,this.dilu,this.xijun,this.distance,this.beatCount)},e.prototype.BtnAgainClick=function(){againClick(this.score,this.dilu,this.xijun,this.distance,this.beatCount)},e}(eui.Component);__reflect(GameOverView.prototype,"GameOverView",["eui.UIComponent","egret.DisplayObject"]);var GuanJia=function(t){function e(){var e=t.call(this)||this;return e.guanJiaImgList=new Array,e.babyIndex=0,e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);for(var e=0;16>e;e++){var i;10>e?(i="侧面男B 5_0000"+e+"_png",this.guanJiaImgList.push(RES.getRes(i))):(i="侧面男B 5_000"+e+"_png",this.guanJiaImgList.push(RES.getRes(i)))}this.addEventListener(egret.Event.ENTER_FRAME,this.DoAni,this)},e.prototype.DoAni=function(){this.ImgGuanJia.texture=this.guanJiaImgList[this.babyIndex],this.ImgGuanJia,this.babyIndex++,this.babyIndex>15&&(this.babyIndex=0)},e}(eui.Component);__reflect(GuanJia.prototype,"GuanJia",["eui.UIComponent","egret.DisplayObject"]);var HomeView=function(t){function e(){var e=t.call(this)||this;return e.imgIndex=0,e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.skin.width=this.stage.stageWidth,this.BtnStart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.StartGame,this)},e.prototype.StartGame=function(){var t=5e3/63;this.timer=new egret.Timer(t,0),this.timer.addEventListener(egret.TimerEvent.TIMER,this.ShowTrans,this),this.timer.start()},e.prototype.ShowTrans=function(){var t;if(this.imgIndex<63)t=this.imgIndex<10?"合成 2_0000"+this.imgIndex+"_jpg":"合成 2_000"+this.imgIndex+"_jpg",this.ImgTrans.source=RES.getRes(t),this.imgIndex++;else{this.timer.stop();var e=new PrepareView;this.stage.addChild(e),this.stage.removeChild(this)}},e}(eui.Component);__reflect(HomeView.prototype,"HomeView",["eui.UIComponent","egret.DisplayObject"]);var PlayerTs=function(t){function e(){var e=t.call(this)||this;return e.isHaveFanghu=!1,e.girlList=new Array,e.playerState=PlayerAni.RUN,e.runIndex=0,e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);for(var e=0;16>e;e++){var i;10>e?(i="Comp 3_0000"+e+"_png",this.girlList.push(RES.getRes(i))):(i="Comp 3_000"+e+"_png",this.girlList.push(RES.getRes(i)))}this.addEventListener(egret.Event.ENTER_FRAME,this.DoAni,this)},e.prototype.DoAni=function(){switch(this.playerState){case PlayerAni.IDLE:break;case PlayerAni.RUN:this.aniImage.visible=!1,this.runAni();break;case PlayerAni.JUMP:this.runAni();break;case PlayerAni.RUSH:this.runAni(),this.chongciAni();break;case PlayerAni.SHOOT:this.runAni(),this.fasezidan();break;case PlayerAni.DEFEND:this.runAni(),this.fanghuzhao();break;case PlayerAni.LOSEDFD:this.runAni(),this.siqufanghuzhao();break;case PlayerAni.DEAD:this.ShowDead()}},e.prototype.tiaoYueAni=function(){},e.prototype.runAni=function(){this.ImgPlayer.source=this.girlList[this.runIndex],this.runIndex++,this.runIndex>15&&(this.runIndex=0)},e.prototype.chongciAni=function(){this.aniImage.visible=!0,this.aniImage.texture=RES.getRes("加速冲刺_png")},e.prototype.fanghuzhao=function(){this.aniImage0.visible=!0,this.isHaveFanghu=!0},e.prototype.siqufanghuzhao=function(){this.aniImage0.visible=!1,this.isHaveFanghu=!1},e.prototype.returnHaveFanghu=function(){return this.isHaveFanghu},e.prototype.fasezidan=function(){this.aniImage.visible=!0,this.aniImage.texture=RES.getRes("子弹时间道具_png")},e.prototype.ShowDead=function(){this.ImgPlayer.source=RES.getRes("dead_png"),this.ImgPlayer.width=209,this.ImgPlayer.height=137},e}(eui.Component);__reflect(PlayerTs.prototype,"PlayerTs",["eui.UIComponent","egret.DisplayObject"]);var PrepareView=function(t){function e(){var e=t.call(this)||this;return e.propsIndex=1,e.playerIndex=1,e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.skin.width=this.stage.stageWidth,this.Init()},e.prototype.Init=function(){var t=this;this.RectProps.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ShowProps,this),this.RectPlayers.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ShowPlayers,this),this.Props1.addEventListener(egret.Event.CHANGE,this.PropsClick,this),this.Props2.addEventListener(egret.Event.CHANGE,this.PropsClick,this),this.Props3.addEventListener(egret.Event.CHANGE,this.PropsClick,this),this.Player1.addEventListener(egret.Event.CHANGE,this.PlayersClick,this),this.Player2.addEventListener(egret.Event.CHANGE,this.PlayersClick,this),this.BtnStart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.StartGame,this);var e=egret.Tween.get(this.ImgBreath,{loop:!0});e.to({alpha:0},800,egret.Ease.backInOut),this.musicTog.addEventListener(egret.Event.CHANGE,function(){t.musicTog.selected?(stopSound(),ModelDate.musicIsOn=!1):(playSound(),ModelDate.musicIsOn=!0)},this)},e.prototype.ShowProps=function(){this.Group2.visible=!1,this.Group1.visible=!0},e.prototype.ShowPlayers=function(){this.Group1.visible=!1,this.Group2.visible=!0},e.prototype.PropsClick=function(t){for(var e=0;3>e;e++)this.GroupProps.getChildAt(e).selected=!1;var i=t.target;i.selected=!0,this.propsIndex=parseInt(i.name),console.log("propsIndex: "+this.propsIndex)},e.prototype.PlayersClick=function(t){for(var e=0;2>e;e++)this.GroupPlayers.getChildAt(e).selected=!1;var i=t.target;i.selected=!0,this.playerIndex=parseInt(i.name),console.log("playerIndex: "+this.playerIndex)},e.prototype.StartGame=function(){var t=new GameScence(this.propsIndex,this.playerIndex);this.stage.addChild(t),this.stage.removeChild(this)},e}(eui.Component);__reflect(PrepareView.prototype,"PrepareView",["eui.UIComponent","egret.DisplayObject"]);var GameScence=function(t){function e(e,i){var o=t.call(this)||this;return o.gameshuoming=["请点击屏幕跳跃，躲避细菌和障碍物","在探索之旅中要小心各种细菌哦，别忘了使用滴露道具"],o.daojuArr=["抑菌洗手液_png","消毒液_png","泡沫洗手液_png"],o.tiaoBanPool=[],o.gradeNum=0,o.MinHeight=155,o.MaxHeight=265,o.isAni=!1,o.nowAtTiaoBanNumber=0,o.nowSlect=0,o.BGarr=["背景_png","海洋改731_jpg","太空场景背景_jpg"],o.canTiaoyue=!0,o.firstdayu300=!1,o.firstdayu600=!1,o.Nowtime=0,o.daojuID=e,o.renwuID=i,o}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.skin.width=this.stage.stageWidth,ModelDate.daojuNum=0,ModelDate.xijuNum=0,this.daoju.texture=RES.getRes(this.daojuArr[this.daojuID-1]),this.grade.text="0",this.showInfo(),this.createAllTiaoBan(),this.juliTime=new egret.Timer(50),this.playerController.anchorOffsetY=this.playerController.height,this.playerController.bottom=this.tiaoBanPool[0].bottom+50,this.over.visible=!1,this.tipsQifei.visible=!1,1==this.renwuID?this.guanjia.visible=!1:this.baby.visible=!1,this.liaotianwenzi.text=this.gameshuoming[0],this.musicTog.selected=!ModelDate.musicIsOn,this.musicTog.addEventListener(egret.Event.CHANGE,function(){e.musicTog.selected?(stopSound(),ModelDate.musicIsOn=!1):(playSound(),ModelDate.musicIsOn=!0)},this)},e.prototype.humanChongci=function(){var t=this;egret.Tween.removeAllTweens(),this.clickView.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.playJump,this),this.isAni=!1,this.canTiaoyue=!0,this.playerController2.playerState=PlayerAni.RUSH,egret.Tween.get(this.playerController).to({bottom:500},300);var e=new egret.Timer(5e3,1);e.addEventListener(egret.TimerEvent.TIMER_COMPLETE,function(){t.isAni=!1,t.canTiaoyue=!0,t.clickView.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.playJump,t),t.playerController2.playerState=PlayerAni.RUN,t.tipsQifei.visible=!1},this),e.start(),this.tipsQifei.visible=!0,this.tipsQifei.right=-this.tipsQifei.width,egret.Tween.get(this.tipsQifei).to({right:0},600)},e.prototype.zidanTime=function(){var t=this,e=new egret.Timer(5e3,1);this.playerController2.playerState=PlayerAni.SHOOT,e.addEventListener(egret.TimerEvent.TIMER_COMPLETE,function(){t.playerController2.playerState==PlayerAni.SHOOT&&(t.clickView.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.playJump,t),t.playerController2.playerState=PlayerAni.RUN)},this),e.start()},e.prototype.playJump=function(){var t=this;egret.log("isani="+this.isAni+"cantiaoyue="+this.canTiaoyue),this.isAni||this.canTiaoyue&&(this.canTiaoyue=!1,this.isAni=!0,egret.Tween.get(this.playerController).to({bottom:this.playerController.bottom+150},300).wait(150).call(function(){t.isAni=!1,t.canTiaoyue=!1}))},e.prototype.createAllTiaoBan=function(){this.tiaoBanPool.push(this.tiaoBan),this.tiaoBan.initStart();for(var t=0;10>t;t++)this.createTiaoBan()},e.prototype.createTiaoBan=function(){var t=155+70*Math.random(),e=new TiaoBanComponent,i=this.tiaoBanPool[this.tiaoBanPool.length-1].width+this.tiaoBanPool[this.tiaoBanPool.length-1].x+60;e.x=i,e.bottom=t,this.tiaoBanPool.push(e),this.tiaoBanPool[0].parent.addChild(e)},e.prototype.scenceMoveControll=function(){var t=this;this.bg1.left-=10,this.bg2.left-=10,this.bg1.left<=-2003&&(this.bg1.left=this.bg2.left+2003),this.bg2.left<=-2003&&(this.bg2.left=this.bg1.left+2003);for(var e=0;e<this.tiaoBanPool.length;e++)this.tiaoBanPool[e].x-=10;if(this.tiaoBanPool[0].width+this.tiaoBanPool[0].x>200&&this.tiaoBanPool[0].x<200&&this.playerController.bottom>=this.tiaoBanPool[0].bottom+40&&this.playerController.bottom<=this.tiaoBanPool[0].bottom+60&&this.tiaoBanPool[0].tiaobanType==TiaoBanType.xiju&&this.playerController2.playerState==PlayerAni.SHOOT?(this.gradeNum+=50,this.tiaoBanPool[0].shengChengZiDanXiaomieXijun()):this.tiaoBanPool[1].width+this.tiaoBanPool[1].x>200&&this.tiaoBanPool[1].x<200&&this.playerController.bottom>=this.tiaoBanPool[1].bottom+40&&this.playerController.bottom==this.tiaoBanPool[1].bottom+50&&this.tiaoBanPool[1].tiaobanType==TiaoBanType.xiju&&this.playerController2.playerState==PlayerAni.SHOOT?(this.gradeNum+=50,this.tiaoBanPool[1].shengChengZiDanXiaomieXijun()):this.tiaoBanPool[2].width+this.tiaoBanPool[2].x>200&&this.tiaoBanPool[2].x<200&&this.playerController.bottom>=this.tiaoBanPool[2].bottom+40&&this.playerController.bottom==this.tiaoBanPool[2].bottom+50&&this.tiaoBanPool[2].tiaobanType==TiaoBanType.xiju&&this.playerController2.playerState==PlayerAni.SHOOT&&(this.gradeNum+=50,this.tiaoBanPool[1].shengChengZiDanXiaomieXijun()),this.tiaoBanPool[0].width+this.tiaoBanPool[0].x>200&&this.tiaoBanPool[0].x<200&&this.playerController.bottom<this.tiaoBanPool[0].bottom+50+25&&this.playerController.bottom>this.tiaoBanPool[0].bottom+50-50?(this.playerController.bottom=this.tiaoBanPool[0].bottom+50,this.nowAtTiaoBanNumber=0,this.canTiaoyue=!0):this.tiaoBanPool[1].width+this.tiaoBanPool[1].x>200&&this.tiaoBanPool[1].x<200&&this.playerController.bottom<this.tiaoBanPool[1].bottom+50+25&&this.playerController.bottom>this.tiaoBanPool[1].bottom+50-50?(this.playerController.bottom=this.tiaoBanPool[1].bottom+50,this.nowAtTiaoBanNumber=1,this.canTiaoyue=!0):this.tiaoBanPool[2].width+this.tiaoBanPool[2].x>200&&this.tiaoBanPool[2].x<200&&this.playerController.bottom<this.tiaoBanPool[2].bottom+50+25&&this.playerController.bottom>this.tiaoBanPool[2].bottom+50-50&&(this.playerController.bottom=this.tiaoBanPool[2].bottom+50,this.nowAtTiaoBanNumber=2,this.canTiaoyue=!0),this.playerController2.playerState!=PlayerAni.RUSH){if(this.tiaoBanPool[0].width+this.tiaoBanPool[0].x>200&&this.tiaoBanPool[0].x<200&&this.playerController.bottom==this.tiaoBanPool[0].bottom+50){if(this.canTiaoyue=!0,this.tiaoBanPool[0].returnIsPengZhuang())if(this.playerController2.returnHaveFanghu())console.log(this.playerController2.returnHaveFanghu),this.playerController2.siqufanghuzhao(),this.tiaoBanPool[0].xiaomieXiJun();else{this.gradeNum+=50,this.daoju.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.useDAoju,this),this.over.visible=!0,this.playerController.width=239,this.playerController.height=137,this.playerController2.playerState=PlayerAni.DEAD,this.removeEventListener(egret.Event.ENTER_FRAME,this.scenceMoveControll,this),this.juliTime.stop(),this.clickView.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.playJump,this),this.newOver.alpha=0;var i=new ImTS;window.imTS=i,getChaoYueNum(this.gradeNum,ModelDate.daojuNum,ModelDate.xijuNum,this.gradeNum-50*ModelDate.xijuNum),egret.Tween.get(this.newOver).to({alpha:1},800).wait(2200).call(function(){t.gameOver()})}switch(this.tiaoBanPool[0].returnIsPengZhuangDaoju()){case 0:break;case 1:this.humanChongci();break;case 2:this.zidanTime();break;case 3:this.playerController2.fanghuzhao()}}else if(this.tiaoBanPool[1].width+this.tiaoBanPool[1].x>200&&this.tiaoBanPool[1].x<200&&this.playerController.bottom==this.tiaoBanPool[1].bottom+50){if(this.canTiaoyue=!0,this.tiaoBanPool[1].returnIsPengZhuang())if(this.playerController2.returnHaveFanghu())this.playerController2.siqufanghuzhao(),this.tiaoBanPool[1].xiaomieXiJun();else{this.gradeNum+=50,this.daoju.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.useDAoju,this),this.over.visible=!0,this.playerController2.playerState=PlayerAni.DEAD,this.removeEventListener(egret.Event.ENTER_FRAME,this.scenceMoveControll,this),this.juliTime.stop(),this.clickView.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.playJump,this),this.playerController.width=239,this.playerController.height=137,this.newOver.alpha=0;var i=new ImTS;window.imTS=i,getChaoYueNum(this.gradeNum,ModelDate.daojuNum,ModelDate.xijuNum,this.gradeNum-50*ModelDate.xijuNum),egret.Tween.get(this.newOver).to({alpha:1},800).wait(2200).call(function(){t.gameOver()})}switch(this.tiaoBanPool[1].returnIsPengZhuangDaoju()){case 0:break;case 1:this.humanChongci();break;case 2:this.zidanTime();break;case 3:this.playerController2.fanghuzhao()}}else if(this.tiaoBanPool[2].width+this.tiaoBanPool[2].x>200&&this.tiaoBanPool[2].x<200&&this.playerController.bottom==this.tiaoBanPool[2].bottom+50){if(this.canTiaoyue=!0,this.tiaoBanPool[2].returnIsPengZhuang())if(this.playerController2.returnHaveFanghu())this.playerController2.siqufanghuzhao(),this.tiaoBanPool[2].xiaomieXiJun();else{this.gradeNum+=50,this.daoju.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.useDAoju,this),this.over.visible=!0,this.playerController2.playerState=PlayerAni.DEAD,this.removeEventListener(egret.Event.ENTER_FRAME,this.scenceMoveControll,this),this.juliTime.stop(),this.clickView.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.playJump,this),this.playerController.width=239,this.playerController.height=137,this.newOver.alpha=0;var i=new ImTS;window.imTS=i,getChaoYueNum(this.gradeNum,ModelDate.daojuNum,ModelDate.xijuNum,this.gradeNum-50*ModelDate.xijuNum),egret.Tween.get(this.newOver).to({alpha:1},800).wait(2200).call(function(){t.gameOver()})}switch(this.tiaoBanPool[2].returnIsPengZhuangDaoju()){case 0:break;case 1:this.humanChongci();break;case 2:this.zidanTime();break;case 3:this.playerController2.fanghuzhao()}}if(this.tiaoBanPool[0].width+this.tiaoBanPool[0].x>200&&this.tiaoBanPool[0].x<200){if(this.playerController.bottom>this.tiaoBanPool[0].bottom+50&&(this.isAni||4==Number(this.playerController2.playerState)||(this.playerController.bottom-=20)),this.playerController.bottom<=this.tiaoBanPool[0].bottom+80&&this.playerController.bottom>this.tiaoBanPool[0].bottom+50-50)return this.playerController.bottom=this.tiaoBanPool[0].bottom+50,this.nowAtTiaoBanNumber=0,void(this.canTiaoyue=!0);this.playerController.bottom>this.tiaoBanPool[0].bottom+50-100&&this.playerController.bottom<this.tiaoBanPool[0].bottom+50-50?this.isAni||(this.playerController.bottom-=20):this.playerController.bottom<=this.tiaoBanPool[0].bottom+50-100&&(this.daoju.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.useDAoju,this),this.over.visible=!0,this.playerController2.playerState=PlayerAni.IDLE,this.removeEventListener(egret.Event.ENTER_FRAME,this.scenceMoveControll,this),this.juliTime.stop(),this.clickView.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.playJump,this),egret.Tween.removeAllTweens(),this.newOver.alpha=0,egret.Tween.get(this.newOver).to({alpha:1},800).wait(2200).call(function(){t.gameOver()}),egret.Tween.get(this.playerController).wait(1200).to({bottom:-300},300).call(function(){}))}else if(this.tiaoBanPool[1].width+this.tiaoBanPool[1].x>200&&this.tiaoBanPool[1].x<200){if(this.playerController.bottom>this.tiaoBanPool[0].bottom+50&&(this.isAni||4==Number(this.playerController2.playerState)||(this.playerController.bottom-=20)),this.playerController.bottom<=this.tiaoBanPool[1].bottom+80&&this.playerController.bottom>this.tiaoBanPool[1].bottom+50-50)return this.playerController.bottom=this.tiaoBanPool[1].bottom+50,this.nowAtTiaoBanNumber=1,void(this.canTiaoyue=!0);if(this.playerController.bottom>this.tiaoBanPool[1].bottom+50-100&&this.playerController.bottom<this.tiaoBanPool[1].bottom+50-50)this.isAni||(this.playerController.bottom-=20);else if(this.playerController.bottom<=this.tiaoBanPool[1].bottom+50-100){this.daoju.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.useDAoju,this),this.over.visible=!0,this.playerController2.playerState=PlayerAni.IDLE,this.removeEventListener(egret.Event.ENTER_FRAME,this.scenceMoveControll,this),this.juliTime.stop(),this.clickView.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.playJump,this),egret.Tween.removeAllTweens(),this.newOver.alpha=0;var i=new ImTS;window.imTS=i,getChaoYueNum(this.gradeNum,ModelDate.daojuNum,ModelDate.xijuNum,this.gradeNum-50*ModelDate.xijuNum),egret.Tween.get(this.newOver).to({alpha:1},800).wait(2200).call(function(){t.gameOver()}),egret.Tween.get(this.playerController).wait(1200).to({bottom:-300},300).call(function(){})}}else if(this.tiaoBanPool[2].width+this.tiaoBanPool[2].x>200&&this.tiaoBanPool[2].x<200){if(this.playerController.bottom>this.tiaoBanPool[0].bottom+50&&(this.isAni||4==Number(this.playerController2.playerState)||(this.playerController.bottom-=20)),this.playerController.bottom<=this.tiaoBanPool[2].bottom+80&&this.playerController.bottom>this.tiaoBanPool[2].bottom+50-50)return this.playerController.bottom=this.tiaoBanPool[2].bottom+50,this.nowAtTiaoBanNumber=2,void(this.canTiaoyue=!0);
if(this.playerController.bottom>this.tiaoBanPool[2].bottom+50-100&&this.playerController.bottom<this.tiaoBanPool[2].bottom+50-50&&(this.isAni||(this.playerController.bottom-=20)),this.playerController.bottom<=this.tiaoBanPool[2].bottom+50-100){this.daoju.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.useDAoju,this),this.over.visible=!0,this.playerController2.playerState=PlayerAni.IDLE,this.removeEventListener(egret.Event.ENTER_FRAME,this.scenceMoveControll,this),this.juliTime.stop(),this.clickView.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.playJump,this),egret.Tween.removeAllTweens(),this.newOver.alpha=0;var i=new ImTS;window.imTS=i,getChaoYueNum(this.gradeNum,ModelDate.daojuNum,ModelDate.xijuNum,this.gradeNum-50*ModelDate.xijuNum),egret.Tween.get(this.newOver).to({alpha:1},800).wait(2200).call(function(){t.gameOver()}),egret.Tween.get(this.playerController).wait(1200).to({bottom:-300},300).call(function(){})}}else this.isAni||(this.playerController.bottom-=20);if(this.tiaoBanPool[0].x<-this.tiaoBanPool[0].width){var o=this.tiaoBanPool.shift(),a=this.tiaoBanPool[this.tiaoBanPool.length-1].width+this.tiaoBanPool[this.tiaoBanPool.length-1].x+60,n=155+70*Math.random();o.x=a,o.bottom=n,this.tiaoBanPool.push(o),o.init()}}},e.prototype.showInfo=function(){var t=this;this.tips.$setVisible(!0),this.renwu.$setAlpha(0),this.liaotian.$setAlpha(0),this.liaotianwenzi.$setAlpha(0),this.daoju.$setAlpha(0),egret.Tween.get(this.daojishi).wait(1e3).call(function(){t.daojishi.texture=RES.getRes("daojiashi2_png")}),egret.Tween.get(this.daojishi).wait(2e3).call(function(){t.daojishi.texture=RES.getRes("daojiashi1_png")}),egret.Tween.get(this.renwu).to({alpha:1},300),egret.Tween.get(this.liaotian).wait(200).to({alpha:1},300),egret.Tween.get(this.liaotianwenzi).wait(800).to({alpha:1},200),egret.Tween.get(this.daoju).wait(3e3).to({alpha:1},600).call(function(){t.showInfoDaoju(),t.daoju.addEventListener(egret.TouchEvent.TOUCH_TAP,t.useDAoju,t),t.liaotianwenzi.text=t.gameshuoming[1],t.daojishi.visible=!1,t.daojishirect.visible=!1})},e.prototype.useDAoju=function(){switch(ModelDate.daojuNum+=1,this.daojuID){case 0:break;case 1:this.humanChongci();break;case 2:this.zidanTime();break;case 3:this.playerController2.fanghuzhao()}this.daoju.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.useDAoju,this),egret.Tween.get(this.daoju).to({alpha:.3},300)},e.prototype.showInfoDaoju=function(){this.canTiaoyue=!0,this.clickView.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.playJump,this),this.addEventListener(egret.Event.ENTER_FRAME,this.scenceMoveControll,this),this.timeLoading=new egret.Timer(1e3),this.timeLoading.addEventListener(egret.TimerEvent.TIMER,this.LoadingTimer,this),this.timeLoading.start(),this.juliTime.addEventListener(egret.TimerEvent.TIMER,this.raceTimer,this),this.juliTime.start(),this.playerController2.playerState=PlayerAni.RUN,playEffect("conglin.mp3")},e.prototype.raceTimer=function(){this.gradeNum+=1,this.grade.text=this.gradeNum.toString(),this.gradeNum%300==0&&(this.changeScenceBg(),ModelData.hardSpace+=1,ModelData.hardSpace>7&&(ModelData.hardSpace=7)),this.gradeNum-50*ModelDate.xijuNum>300&&(this.firstdayu300||(this.firstdayu300=!0,playEffect("haiyang.mp3"))),this.gradeNum-50*ModelDate.xijuNum>600&&(this.firstdayu600||(this.firstdayu600=!0,playEffect("taikong.mp3")))},e.prototype.changeScenceBg=function(){this.nowSlect=++this.nowSlect%this.BGarr.length,this.bg1.texture=RES.getRes(this.BGarr[this.nowSlect]),this.bg2.texture=RES.getRes(this.BGarr[this.nowSlect]);for(var t=0;t<this.tiaoBanPool.length;t++)this.tiaoBanPool[t].changeTexture(this.nowSlect);for(var t=0;t<this.tiaoBanPool.length;t++)this.tiaoBanPool[t].HIdeAndSHow()},e.prototype.LoadingTimer=function(){++this.Nowtime},e.prototype.gameOver=function(){var t=this;this.timeLoading.stop(),egret.Tween.get(this.bg1).wait(1500).call(function(){var e=0;t.Nowtime>75&&(e=1),t.Nowtime<=75&&t.Nowtime>=25&&(e=3),t.Nowtime<25&&(e=2);var i=new GameOverView(e,t.gradeNum,ModelDate.daojuNum,ModelDate.xijuNum,t.gradeNum-50*ModelDate.xijuNum,ModelDate.chaoyuerenshu);t.parent.addChild(i),t.parent.removeChild(t)})},e}(eui.Component);__reflect(GameScence.prototype,"GameScence",["eui.UIComponent","egret.DisplayObject"]);